(self.webpackChunkmall_admin=self.webpackChunkmall_admin||[]).push([[6363],{9676:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}}),t=r(59713);var n=r.n(t),o=(t=r(67154),r.n(t)),a=r(67294),c=(t=r(94184),r.n(t)),l=r(50132),u=(t=r(319),r.n(t)),i=(t=r(63038),r.n(t)),s=r(97435),d=r(65632),f=a.createContext(null),p=(t=function(e){var t=e.defaultValue,r=e.children,l=void 0===(b=e.options)?[]:b,p=e.prefixCls,m=e.className,v=e.style,y=e.onChange,g=function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),b=(e=(b=a.useContext(d.E_)).getPrefixCls,b.direction),k=(t=a.useState(g.value||t||[]),(t=i()(t,2))[0]),j=t[1],C=(t=a.useState([]),(t=i()(t,2))[0]),R=t[1];function O(){return l.map((function(e){return"string"==typeof e?{label:e,value:e}:e}))}a.useEffect((function(){"value"in g&&j(g.value||[])}),[g.value]);var P=e("checkbox",p),E="".concat(P,"-group");return e=(0,s.default)(g,["value","disabled"]),l&&0<l.length&&(r=O().map((function(e){return a.createElement(h,{prefixCls:P,key:e.value.toString(),disabled:("disabled"in e?e:g).disabled,value:e.value,checked:-1!==k.indexOf(e.value),onChange:e.onChange,className:"".concat(E,"-item"),style:e.style},e.label)}))),p={toggleOption:function(e){var t,r=k.indexOf(e.value),n=u()(k);-1===r?n.push(e.value):n.splice(r,1),"value"in g||j(n),y&&(t=O(),y(n.filter((function(e){return-1!==C.indexOf(e)})).sort((function(e,r){return t.findIndex((function(t){return t.value===e}))-t.findIndex((function(e){return e.value===r}))}))))},value:k,disabled:g.disabled,name:g.name,registerValue:function(e){R((function(t){return[].concat(u()(t),[e])}))},cancelValue:function(e){R((function(t){return t.filter((function(t){return t!==e}))}))}},m=c()(E,n()({},"".concat(E,"-rtl"),"rtl"===b),m),a.createElement("div",o()({className:m,style:v},e),a.createElement(f.Provider,{value:p},r))},t=a.memo(t),r(21687));r=function(e,t){var r=e.prefixCls,u=e.className,i=e.children,s=void 0!==(b=e.indeterminate)&&b,h=e.style,m=e.onMouseEnter,v=e.onMouseLeave,y=function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave"]),g=a.useContext(d.E_),b=g.getPrefixCls,k=(e=g.direction,a.useContext(f)),j=a.useRef(y.value);return a.useEffect((function(){null!=k&&k.registerValue(y.value),(0,p.Z)("checked"in y||!!k||!("value"in y),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),a.useEffect((function(){return y.value!==j.current&&(null!=k&&k.cancelValue(j.current),null!=k&&k.registerValue(y.value)),function(){return null==k?void 0:k.cancelValue(y.value)}}),[y.value]),g=b("checkbox",r),b=o()({},y),k&&(b.onChange=function(){y.onChange&&y.onChange.apply(y,arguments),k.toggleOption&&k.toggleOption({label:i,value:y.value})},b.name=k.name,b.checked=-1!==k.value.indexOf(y.value),b.disabled=y.disabled||k.disabled),u=c()((r={},n()(r,"".concat(g,"-wrapper"),!0),n()(r,"".concat(g,"-rtl"),"rtl"===e),n()(r,"".concat(g,"-wrapper-checked"),b.checked),n()(r,"".concat(g,"-wrapper-disabled"),b.disabled),r),u),s=c()(n()({},"".concat(g,"-indeterminate"),s)),a.createElement("label",{className:u,style:h,onMouseEnter:m,onMouseLeave:v},a.createElement(l.Z,o()({},b,{prefixCls:g,className:s,ref:t})),void 0!==i&&a.createElement("span",null,i))},(r=a.forwardRef(r)).displayName="Checkbox";var h=r;(r=h).Group=t,r.__ANT_CHECKBOX=!0;var m=r},63062:function(e,t,r){"use strict";r.d(t,{G:function(){return o}});var n=r(8156);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={fetchList:a,createResource:c,updateResource:l,deleteResource:u,fetchAllResourceList:i};function a(e){return(0,n.Z)({url:"/resource/list",method:"get",params:e})}function c(e){return(0,n.Z)({url:"/resource/create",method:"post",data:e})}function l(e,t){return(0,n.Z)({url:"/resource/update/"+e,method:"post",data:t})}function u(e){return(0,n.Z)({url:"/resource/delete/"+e,method:"post"})}function i(){return(0,n.Z)({url:"/resource/listAll",method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"resourceServices","c:\\Project\\mall-admin\\src\\services\\resource.js"),r.register(a,"fetchList","c:\\Project\\mall-admin\\src\\services\\resource.js"),r.register(c,"createResource","c:\\Project\\mall-admin\\src\\services\\resource.js"),r.register(l,"updateResource","c:\\Project\\mall-admin\\src\\services\\resource.js"),r.register(u,"deleteResource","c:\\Project\\mall-admin\\src\\services\\resource.js"),r.register(i,"fetchAllResourceList","c:\\Project\\mall-admin\\src\\services\\resource.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},49411:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(8156);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={listAllCate:a,createResourceCategory:c,updateResourceCategory:l,deleteResourceCategory:u};function a(){return(0,n.Z)({url:"/resourceCategory/listAll",method:"get"})}function c(e){return(0,n.Z)({url:"/resourceCategory/create",method:"post",data:e})}function l(e,t){return(0,n.Z)({url:"/resourceCategory/update/"+e,method:"post",data:t})}function u(e){return(0,n.Z)({url:"/resourceCategory/delete/"+e,method:"post"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"resourceCategoryServices","c:\\Project\\mall-admin\\src\\services\\resourceCategory.js"),r.register(a,"listAllCate","c:\\Project\\mall-admin\\src\\services\\resourceCategory.js"),r.register(c,"createResourceCategory","c:\\Project\\mall-admin\\src\\services\\resourceCategory.js"),r.register(l,"updateResourceCategory","c:\\Project\\mall-admin\\src\\services\\resourceCategory.js"),r.register(u,"deleteResourceCategory","c:\\Project\\mall-admin\\src\\services\\resourceCategory.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},70055:function(e,t,r){"use strict";r.d(t,{T:function(){return o}});var n=r(8156);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={fetchList:a,createRole:c,updateRole:l,updateStatus:u,deleteRole:i,fetchAllRoleList:s,listMenuByRole:d,listResourceByRole:f,allocMenu:p,allocResource:h};function a(e){return(0,n.Z)({url:"/role/list",method:"get",params:e})}function c(e){return(0,n.Z)({url:"/role/create",method:"post",data:e})}function l(e,t){return(0,n.Z)({url:"/role/update/"+e,method:"post",data:t})}function u(e,t){return(0,n.Z)({url:"/role/updateStatus/"+e,method:"post",params:t})}function i(e){return(0,n.Z)({url:"/role/delete",method:"post",data:e})}function s(){return(0,n.Z)({url:"/role/listAll",method:"get"})}function d(e){return(0,n.Z)({url:"/role/listMenu/"+e,method:"get"})}function f(e){return(0,n.Z)({url:"/role/listResource/"+e,method:"get"})}function p(e){return(0,n.Z)({url:"/role/allocMenu",method:"post",data:e})}function h(e){return(0,n.Z)({url:"/role/allocResource",method:"post",data:e})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"roleServices","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(a,"fetchList","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(c,"createRole","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(l,"updateRole","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(u,"updateStatus","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(i,"deleteRole","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(s,"fetchAllRoleList","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(d,"listMenuByRole","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(f,"listResourceByRole","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(p,"allocMenu","c:\\Project\\mall-admin\\src\\services\\role.js"),r.register(h,"allocResource","c:\\Project\\mall-admin\\src\\services\\role.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},8293:function(e,t,r){"use strict";r.r(t);var n=r(67294),o=r(48086),a=r(39144),c=r(71230),l=r(9676),u=r(15746),i=r(71577),s=r(63062),d=r(49411),f=r(70055),p=r(29041),h=r(16550),m=r(28368);function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(){var e=(0,h.TH)();function t(e){var t=[];if(null==g)return null;for(var r=0;r<g.length;r++){var n=g[r];n.categoryId===e&&t.push(n)}return t}(0,n.useEffect)((function(){C()}),[]);var r=(e=y((0,n.useState)(e.state.roleId),2))[0],g=(e[1],e=y((0,n.useState)([]),2))[0],b=e[1],k=(e=y((0,n.useState)([]),2))[0],j=e[1],C=function(){s.G.fetchAllResourceList().then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].checked=!1;d.Z.listAllCate().then((function(e){for(var n=e.data,o=0;o<n.length;o++)n[o].checked=!1;f.T.listResourceByRole(r).then((function(e){var r=e.data,o=t;e=n,o.forEach((function(e){e.checked=O(e.id,r)})),e.forEach((function(e){e.checked=R(e.id,o)})),b(t),j(n)}))}))}))},R=function(e,t){var r=null==t?null:[];if(null==r)return!1;for(var n=0;n<t.length;n++){var o=t[n];o.categoryId===e&&r.push(o)}for(var a=0,c=0;c<r.length;c++)!0===r[c].checked&&a++;return 0!==a&&a===r.length},O=function(e,t){if(null==t||0===t.length)return!1;for(var r=0;r<t.length;r++)if(t[r].id===e)return!0;return!1};return n.createElement(a.Z,{className:"form-container"},k.map((function(e,r){return n.createElement("div",{className:0===r?"AllocResource_top-line":null,key:"cate".concat(e.id)},n.createElement(c.Z,{key:!0,className:"AllocResource_table-layout",style:{background:"#F2F6FC"}},n.createElement(l.Z,{checked:e.checked,indeterminate:function(e){var r=t(e);if(null==r)return!1;for(var n=0,o=0;o<r.length;o++)!0===r[o].checked&&n++;return!(0===n||n===r.length)}(e.id),onChange:function(t){(function(e,t){for(var r=k,n=0;n<r.length;n++)if(r[n].id==t.id){r[n].checked=e.target.checked;break}j(v(r))})(t,e),function(e,t){for(var r=g,n=0;n<r.length;n++)r[n].categoryId==t.id&&(r[n].checked=e.target.checked);b(v(r))}(t,e)}},e.name)),n.createElement(c.Z,{className:"AllocResource_table-layout"},t(e.id).map((function(e){return n.createElement(u.Z,{span:8,key:e.id,style:{padding:"4px 0"}},n.createElement(l.Z,{checked:e.checked,onChange:function(r){var n;(function(e,t){for(var r=g,n=0;n<r.length;n++)if(r[n].id==t.id){r[n].checked=e.target.checked;break}b(v(r))})(r,e),n=e,(r=k).forEach((function(e){e.id===n.categoryId&&(e.checked=function(e){var r=t(e);if(null==r)return!1;for(var n=0,o=0;o<r.length;o++)!0===r[o].checked&&n++;return 0!==n&&n===r.length}(n.categoryId))})),j(v(r))}},e.name))}))))})),n.createElement("div",{style:{marginTop:"20px",alignContent:"center"}},n.createElement(i.Z,{type:"primary",onClick:function(){(0,m.default)({title:"Are you sure to alloc resource?",okText:"Yes",okType:"primary",onOk:function(){var e=new Set;null!=g&&0<g.length&&g.forEach((function(t){t.checked&&e.add(t.id)}));var t=new URLSearchParams;t.append("roleId",r),t.append("resourceIds",Array.from(e)),f.T.allocResource(t).then((function(e){o.ZP.success("Alloc Success",10),p.history.goBack()}))},onCancel:function(){}})}},"Save"),n.createElement(i.Z,{onClick:function(){var e=g,t=k;t.forEach((function(e){e.checked=!1})),e.forEach((function(e){e.checked=!1})),j(v(t)),b(v(e))}},"Clear")))}e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(k,"useLocation{route}\nuseEffect{}\nuseState{[roleId, setRoleId](route.state.roleId)}\nuseState{[allResource, setAllResource]([])}\nuseState{[allResourceCate, setAllResourceCate]([])}",(function(){return[h.TH]})),r=k,t.default=r,(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(t.register(k,"AllocResource","c:\\Project\\mall-admin\\src\\views\\ums\\role\\allocResource.js"),t.register(r,"default","c:\\Project\\mall-admin\\src\\views\\ums\\role\\allocResource.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},50132:function(e,t,r){"use strict";var n=r(22122),o=r(81253),a=r(96156),c=r(6610),l=r(5991),u=r(65255),i=r(46070),s=r(77608),d=r(67294),f=r(94184),p=r.n(f);function h(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(f=function(e){(0,u.Z)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.Z)(e);return n=t?(r=(0,s.Z)(this).constructor,Reflect.construct(n,arguments,r)):n.apply(this,arguments),(0,i.Z)(this,n)}}(r);function r(e){var n;return(0,c.Z)(this,r),(n=t.call(this,e)).handleChange=function(e){var t=(r=n.props).disabled,r=r.onChange;t||("checked"in n.props||n.setState({checked:e.target.checked}),r&&r({target:m(m({},n.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},n.saveInput=function(e){n.input=e},e="checked"in e?e.checked:e.defaultChecked,n.state={checked:e},n}return(0,l.Z)(r,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e=(C=this.props).prefixCls,t=C.className,r=C.style,c=C.name,l=C.id,u=C.type,i=C.disabled,s=C.readOnly,f=C.tabIndex,h=C.onClick,m=C.onFocus,v=C.onBlur,y=C.autoFocus,g=C.value,b=C.required,k=(0,o.Z)(C,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","autoFocus","value","required"]),j=Object.keys(k).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=k[t]),e}),{}),C=this.state.checked;return t=p()(e,t,(t={},(0,a.Z)(t,"".concat(e,"-checked"),C),(0,a.Z)(t,"".concat(e,"-disabled"),i),t)),d.createElement("span",{className:t,style:r},d.createElement("input",(0,n.Z)({name:c,id:l,type:u,required:b,readOnly:s,disabled:i,tabIndex:f,className:"".concat(e,"-input"),checked:!!C,onClick:h,onFocus:m,onBlur:v,onChange:this.handleChange,autoFocus:y,ref:this.saveInput,value:g},j)),d.createElement("span",{className:"".concat(e,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?m(m({},t),{},{checked:e.checked}):null}}]),r}(d.Component)).defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){}},t.Z=f},74204:function(e,t,r){"use strict";var n;function o(e){return"undefined"==typeof document?0:(!e&&void 0!==n||((r=document.createElement("div")).style.width="100%",r.style.height="200px",(e=(t=document.createElement("div")).style).position="absolute",e.top=0,e.left=0,e.pointerEvents="none",e.visibility="hidden",e.width="200px",e.height="150px",e.overflow="hidden",t.appendChild(r),document.body.appendChild(t),e=r.offsetWidth,t.style.overflow="scroll",e===(r=r.offsetWidth)&&(r=t.clientWidth),document.body.removeChild(t),n=e-r),n);var t,r}r.d(t,{Z:function(){return o}})}}]);