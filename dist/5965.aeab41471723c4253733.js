(self.webpackChunkmall_admin=self.webpackChunkmall_admin||[]).push([[5965],{19650:function(e,t,r){"use strict";r.d(t,{u:function(){return u},Z:function(){return f}}),t=r(67154);var n=r.n(t),a=(t=r(59713),r.n(t)),l=(t=r(63038),r.n(t)),o=r(67294),s=(t=r(94184),r.n(t)),c=r(50344),m=r(65632);function i(e){var t=e.className,r=e.direction,l=e.index,s=e.marginDirection,c=e.children,m=e.split,i=e.wrap,d=(p=o.useContext(u)).horizontalSize,f=p.verticalSize,p=(e=p.latestIndex,{});return"vertical"===r?l<e&&(p={marginBottom:d/(m?2:1)}):p=n()(n()({},l<e&&a()({},s,d/(m?2:1))),i&&{paddingBottom:f}),null==c?null:o.createElement(o.Fragment,null,o.createElement("div",{className:t,style:p},c),l<e&&m&&o.createElement("span",{className:"".concat(t,"-split"),style:p},m))}var u=o.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),d={small:8,middle:16,large:24},f=function(e){var t=(v=o.useContext(m.E_)).getPrefixCls,r=v.space,f=v.direction,p=void 0===(A=e.size)?(null==r?void 0:r.size)||"small":A,b=e.align,y=e.className,g=e.children,E=void 0===(N=e.direction)?"horizontal":N,v=e.prefixCls,h=e.split,Z=(r=e.style,void 0!==(A=e.wrap)&&A),N=function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),A=o.useMemo((function(){return(Array.isArray(p)?p:[p,p]).map((function(e){return"string"==typeof(e=e)?d[e]:e||0}))}),[p]);if(A=(e=l()(A,2))[0],e=e[1],0===(g=(0,c.Z)(g,{keepEmpty:!0})).length)return null;b=void 0===b&&"horizontal"===E?"center":b,t=t("space",v),y=s()(t,"".concat(t,"-").concat(E),(v={},a()(v,"".concat(t,"-rtl"),"rtl"===f),a()(v,"".concat(t,"-align-").concat(b),b),v),y);var x="".concat(t,"-item"),P="rtl"===f?"marginLeft":"marginRight",j=0;return g=g.map((function(e,t){return null!=e&&(j=t),o.createElement(i,{className:x,key:"".concat(x,"-").concat(t),direction:E,index:t,marginDirection:P,split:h,wrap:Z},e)})),o.createElement("div",n()({className:y,style:n()(n()({},Z&&{flexWrap:"wrap",marginBottom:-e}),r)},N),o.createElement(u.Provider,{value:{horizontalSize:A,verticalSize:e,latestIndex:j}},g))}},81717:function(e,t,r){"use strict";r.d(t,{L:function(){return a}});var n=r(8156);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a={fetchList:l};function l(){return(0,n.Z)({url:"/companyAddress/list",method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(a,"companyAddressServices","c:\\Project\\mall-admin\\src\\services\\companyAddress.js"),r.register(l,"fetchList","c:\\Project\\mall-admin\\src\\services\\companyAddress.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},23228:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var n=r(8156);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a={fetchList:l,deleteApply:o,updateApplyStatus:s,getApplyDetail:c};function l(e){return(0,n.Z)({url:"/returnApply/list",method:"get",params:e})}function o(e){return(0,n.Z)({url:"/returnApply/delete",method:"post",params:e})}function s(e,t){return(0,n.Z)({url:"/returnApply/update/status/"+e,method:"post",data:t})}function c(e){return(0,n.Z)({url:"/returnApply/"+e,method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(a,"returnApplyServices","c:\\Project\\mall-admin\\src\\services\\returnApply.js"),r.register(l,"fetchList","c:\\Project\\mall-admin\\src\\services\\returnApply.js"),r.register(o,"deleteApply","c:\\Project\\mall-admin\\src\\services\\returnApply.js"),r.register(s,"updateApplyStatus","c:\\Project\\mall-admin\\src\\services\\returnApply.js"),r.register(c,"getApplyDetail","c:\\Project\\mall-admin\\src\\services\\returnApply.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},21671:function(e,t,r){"use strict";function n(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var r,n,l={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(r in l)new RegExp("(".concat(r,")")).test(t)&&(n=l[r]+"",t=t.replace(RegExp.$1,1===RegExp.$1.length?n:a(n)));return t}function a(e){return("00"+e).substr(e.length)}function l(e,t){t=t||"-";var r=e.split(t);return e=parseInt(r[0]),t=0==r[1].indexOf("0")?parseInt(r[1].substring(1)):parseInt(r[1]),r=parseInt(r[2]),new Date(e,t-1,r)}r.d(t,{p:function(){return n},v:function(){return l}}),e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(n,"formatDate","c:\\Project\\mall-admin\\src\\utils\\date.js"),r.register(a,"padLeftZero","c:\\Project\\mall-admin\\src\\utils\\date.js"),r.register(l,"str2Date","c:\\Project\\mall-admin\\src\\utils\\date.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},70290:function(e,t,r){"use strict";r.r(t);var n=r(8834),a=r(48086),l=r(39144),o=r(36929),s=r(51908),c=r(71230),m=r(15746),i=r(71577),u=r(14617),d=r(19650),f=r(94217),p=r(67294),b=r(23228),y=r(81717),g=r(21671),E=r(29041),v=r(16550),h=r(28368);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)),n}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,l=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&L(e),r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};var L=n.Z.Option;function O(){var e,t=(0,v.TH)(),r=(L=P((0,p.useState)(t.state.id),2))[0],N=(L[1],e=P((0,p.useState)({id:null,orderId:null,companyAddressId:null,productId:null,orderSn:null,createTime:null,memberUsername:null,returnAmount:null,returnName:null,returnPhone:null,status:null,handleTime:null,productPic:null,productName:null,productBrand:null,productAttr:null,productCount:null,productPrice:null,productRealPrice:null,reason:null,description:null,proofPics:null,handleNote:null,handleMan:null,receiveMan:null,receiveTime:null,receiveNote:null}),2))[0],j=e[1],L=(t=P((0,p.useState)([]),2))[0],O=t[1],S=(t=(e=P((0,p.useState)([]),2))[0],e[1]),w=(e=P((0,p.useState)({companyAddressId:null,handleMan:"admin",handleNote:null,receiveMan:"admin",receiveNote:null,returnAmount:0,status:0}),2))[0],H=e[1],G=(e=P((0,p.useState)([]),2))[0],I=e[1];function R(e){H(A(A({},w),{},{status:e})),(0,h.default)({title:"Are you sure to perform this operation?",okText:"OK",okType:"primary",onOk:function(){b.O.updateApplyStatus(r,w).then((function(e){a.ZP.success("Operation Success!",10),E.history.goBack()}))},onCancel:function(){}})}function C(e,t){t||(e=(t=e.target).value,t=t.name),H(A(A({},w),{},x({},t,e)))}(0,p.useEffect)((function(){T()}),[]);var M,z,D,T=function(){b.O.getApplyDetail(r).then((function(e){console.log("getDetail"),j(e.data);var t=[];t.push(e.data),O(t),null!=e.data.proofPics&&S(e.data.proofPics.split(",")),1!==e.data.status&&2!==e.data.status||((t=w).returnAmount=e.data.returnAmount,t.companyAddressId=e.data.companyAddressId,H(t)),k()}))},k=function(){y.L.fetchList().then((function(e){console.log("getcompanyaddress"),I(e.data);for(var t=null,r=0;r<G.length;r++)1===G[r].receiveStatus&&0===N.status&&(t=G[r].id);null!=t&&H(A(A({},w),{},{companyAddressId:t}))}))},$=(0,p.useMemo)((function(){return null!=N?N.productRealPrice*N.productCount:0}),[N]),B=(0,p.useMemo)((function(){var e=w.companyAddressId;if(null==G)return{};for(var t=0;t<G.length;t++){var r=G[t];if(r.id===e)return r}return null}),[w.companyAddressId,G]);return p.createElement("div",{className:"detail-container"},p.createElement(l.Z,null,p.createElement("span",{className:"font-title-medium"},"Return Product"),p.createElement(o.Z,Z({rowKey:"id"},{bordered:!0,size:"default"},{className:"standard-margin",dataSource:L}),p.createElement(f.Z,{title:"Picture",width:"160px",align:"center",render:function(e,t){return p.createElement(s.Z,{style:{height:"80px"},src:t.productPic})}}),p.createElement(f.Z,{title:"Name",align:"center",render:function(e,t){return p.createElement("div",null,p.createElement("span",{className:"font-small"},t.productName),p.createElement("br",null),p.createElement("span",{className:"font-small"},"Brand: ",t.productBrand))}}),p.createElement(f.Z,{title:"Price/Id",width:"180px",align:"center",render:function(e,t){return p.createElement("div",null,p.createElement("span",{className:"font-small"},"Price: $",t.productRealPrice),p.createElement("br",null),p.createElement("span",{className:"font-small"},"Id: NO.",t.productId))}}),p.createElement(f.Z,{title:"Attribute",width:"200px",align:"center",render:function(e,t){return p.createElement("div",null,t.productAttr)}}),p.createElement(f.Z,{title:"Quantity",width:"100px",align:"center",render:function(e,t){return p.createElement("div",null,t.productCount)}}),p.createElement(f.Z,{title:"Picture",width:"100px",align:"center",render:function(){return p.createElement("div",null,"$",$)}})),p.createElement("div",{style:{float:"right",marginTop:"15px",marginBottom:"15px"}},p.createElement("span",{className:"font-title-medium"},"Total: "),p.createElement("span",{className:"font-title-medium color-danger"},"$",$))),p.createElement(l.Z,{className:"standard-margin"},p.createElement("span",{className:"font-title-medium"},"Ticket Info"),p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"TicketId"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.id)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"ApplyStatus"),p.createElement(m.Z,{className:"form-border font-small",span:18},0===(D=N.status)?"Unsolved":1===D?"Returning":2===D?"Solved":"Rejected")),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small",style:{height:"50px",lineHeight:"30px"}},"OrderSn"),p.createElement(m.Z,{className:"form-border font-small",span:18,style:{height:"50px"}},N.orderSn,p.createElement(i.Z,{type:"text",size:"small",onClick:function(){E.history.push("/oms/orderDetail",{id:N.orderId})}},"View"))),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"ApplyTime"),p.createElement(m.Z,{span:18,className:"form-border font-small"},function(e){return null==e||""===e?"N/A":(e=new Date(e),(0,g.p)(e,"yyyy-MM-dd hh:mm:ss"))}(N.createTime))),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"Username"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.memberUsername)),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"Name"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.returnName)),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"Phone"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.returnPhone)),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"Reason"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.reason)),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small"},"Description"),p.createElement(m.Z,{span:18,className:"form-border font-small"},N.description)),p.createElement(c.Z,null,p.createElement(m.Z,{span:6,className:"form-border form-left-bg font-small",style:{height:"100px",lineHeight:"80px"}},"Picture"),p.createElement(m.Z,{span:18,className:"form-border font-small",style:{height:"100px"}},t.map((function(e){return p.createElement("img",{key:e,style:{width:"80px",height:"80px"},src:e})}))))),p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Amount"),p.createElement(m.Z,{className:"form-border font-small",span:18},$)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6,style:{height:"52px",lineHeight:"32px"}},"ConfirmAmount"),p.createElement(m.Z,{className:"form-border font-small",span:18,style:{height:"52px"}},p.createElement(u.Z,{prefix:"$",size:"small",value:w.returnAmount,disabled:0!==N.status,onChange:C,name:"returnAmount",style:{widows:"200px"}}))),3!==N.status&&p.createElement("div",null,p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6,style:{height:"52px",lineHeight:"32px"}},"ReceiveLocation"),p.createElement(m.Z,{className:"form-border font-small",span:18,style:{height:"52px"}},p.createElement(n.Z,{size:"small",style:{width:"200px"},disabled:0!==N.status,value:w.companyAddressId,name:"companyAddressId",onChange:function(e){return C(e,"companyAddressId")}},G.map((function(e){e.id,e.id,e.addressName}))))),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Receiver"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.name:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Address"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?(z=(M=B).province,null!=M.city&&(z+="  "+M.city),z+="  "+M.region):null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"AddressDetail"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.detailAddress:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Phone"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.phone:null)))),0!==N.status&&p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Staff"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.handleMan:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"ResolveTime"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.handleTime:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"ResolveNote"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.handleNote:null))),2===N.status&&p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"Receiver"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.receiveMan:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"ReceiveTime"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.receiveTime:null)),p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6},"ReceiveNote"),p.createElement(m.Z,{className:"form-border font-small",span:18},B?B.receiveNote:null))),0===N.status&&p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6,style:{height:"52px",lineHeight:"32px"}},"ResolveNote"),p.createElement(m.Z,{className:"form-border font-small",span:18},p.createElement(u.Z,{size:"small",value:w.handleNote,style:{width:"200px",marginLeft:"10px"},onChange:C,name:"handleNote"})))),1===N.status&&p.createElement("div",{className:"form-container-border"},p.createElement(c.Z,null,p.createElement(m.Z,{className:"form-border form-left-bg font-small",span:6,style:{height:"52px",lineHeight:"32px"}},"ReceiveNote"),p.createElement(m.Z,{className:"form-border font-small",span:18},p.createElement(u.Z,{size:"small",value:w.receiveNote,style:{width:"200px",marginLeft:"10px"},onChange:C,name:"receiveNote"})))),0===N.status&&p.createElement(d.Z,{style:{marginTop:"15px",textAlign:"center"}},p.createElement(i.Z,{type:"primary",size:"small",onClick:function(){return R(1)}},"ConfirmReturn"),p.createElement(i.Z,{danger:!0,size:"small",onClick:function(){return R(3)}},"RefuseReturn")),1===N.status&&p.createElement(d.Z,{style:{marginTop:"15px",textAlign:"center"}},p.createElement(i.Z,{type:"primary",size:"small",onClick:function(){return R(2)}},"ConfirmReceive"))))}r(O,"useLocation{route}\nuseState{[id, setId](route.state.id)}\nuseState{[orderReturnApply, setOrderReturnApply](defaultOrderReturnApply)}\nuseState{[productList, setProductList]([])}\nuseState{[proofPics, setProofPics]([])}\nuseState{[updateStatusParam, setUpdateStatusParam](defaultUpdateStatusParam)}\nuseState{[companyAddressList, setCompanyAddressList]([])}\nuseEffect{}\nuseMemo{totalAmount}\nuseMemo{currentAddress}",(function(){return[v.TH]})),r=O,t.default=r,(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(t.register(L,"Option","c:\\Project\\mall-admin\\src\\views\\oms\\apply\\applyDetail.js"),t.register(O,"ReturnApplyDetail","c:\\Project\\mall-admin\\src\\views\\oms\\apply\\applyDetail.js"),t.register(r,"default","c:\\Project\\mall-admin\\src\\views\\oms\\apply\\applyDetail.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}}]);